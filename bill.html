<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eco-Hub Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body, html {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            height: 100%;
            width: 100%;
            display: flex;
            background-color: #e0f0e0;
        }
        #sidebar {
            width: 250px;
            height: 100vh;
            position: fixed;
            top: 0;
            left: 0;
            overflow-y: auto;
            background-color: #2E8B57;
            padding-top: 20px;
        }

        #sidebar h3 {
            margin-bottom: 30px;
            text-align: center;
            color: #fff;
        }

        #sidebar-nav .nav-item {
            padding: 10px 0;
            border-bottom: 1px solid #343a40;
        }

        #sidebar-nav .nav-link {
            color: #adb5bd;
            transition: color 0.3s;
        }

        #sidebar-nav .nav-link:hover,
        #sidebar-nav .nav-link.active {
            color: #fff;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            padding-left: 10px;
        }

        @media (max-width: 768px) {
            #sidebar {
                width: 100%;
                height: auto;
                position: relative;
            }
        }
        .content {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            height: 100vh;
            width: calc(100% - 220px); 
            padding: 20px;
            box-sizing: border-box;
            margin-left: 250px;
        }
        .icons {
            display: flex;
            gap: 10px;
        }
        .dashboard {
            background-color: #3CB371;
            padding: 20px;
            border-radius: 5px;
            margin-top: 20px;
        }
        .form-group {
            margin-bottom: 10px;
        }
        .form-group label {
            display: inline-block;
            width: 150px;
        }
        .form-group input {
            width: 170px;
            padding: 5px;
        }
        .button {
            background-color: #45a049;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        .button:hover {
            background-color: #3d8b3d;
        }
        .month-dropdown {
            display: none;
            position: absolute;
            background-color: #f9f9f9;
            box-shadow: 0px 8px 16px rgba(0, 0, 0, 0.2);
            z-index: 1;
            margin-top: 10px;
        }
        .month-dropdown a {
            color: black;
            padding: 10px 16px;
            text-decoration: none;
            display: block;
        }
        .month-dropdown a:hover {
            background-color: #ddd;
        }
        a {
            color: black;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <nav id="sidebar" class="p-4">
        <h3 class="text-light"><a href="/main.html">ECOHUB</a></h3>
        <ul id="sidebar-nav" class="nav flex-column">
            <li class="nav-item mb-3">
                <a href="analysis.html" class="nav-link text-light">Analysis</a>
            </li>
            <li class="nav-item mb-3">
                <a href="source.html" class="nav-link text-light">Source</a>
            </li>
            <li class="nav-item mb-3">
                <a href="bill.html" class="nav-link text-light active">Bill</a>
            </li>
            <li class="nav-item mb-3">
                <a href="education.html" class="nav-link text-light">Education</a>
            </li>
            <li class="nav-item mb-3">
                <a href="maintenance.html" class="nav-link text-light">Maintenance</a>
            </li>
            <li class="nav-item mb-3">
                <a href="cfc.html" class="nav-link text-light">Carbon Footprint</a>
            </li>
            <li class="nav-item mb-3">
                <a href="donate.html" class="nav-link text-light">Donate</a>
            </li>
            <li class="nav-item mb-3">
                <a href="ecommerce.html" class="nav-link text-light">E-commerce</a>
            </li>
        </ul>
    </nav>
    <div class="content">
        <div class="search-bar">
            <div class="icons"></div>
        </div>
        <div class="dashboard">
            <button class="button" id="monthButton">Month</button>
            <div class="month-dropdown" id="monthDropdown">
                <a href="#" data-month="January">January</a>
                <a href="#" data-month="February">February</a>
                <a href="#" data-month="March">March</a>
                <a href="#" data-month="April">April</a>
                <a href="#" data-month="May">May</a>
                <a href="#" data-month="June">June</a>
                <a href="#" data-month="July">July</a>
                <a href="#" data-month="August">August</a>
                <a href="#" data-month="September">September</a>
                <a href="#" data-month="October">October</a>
                <a href="#" data-month="November">November</a>
                <a href="#" data-month="December">December</a>
            </div>
            <div class="form-group">
                <label>Name:</label>
                <input type="text" id="name">
            </div>
            <div class="form-group">
                <label>Address:</label>
                <input type="text" id="address">
            </div>
            <div class="form-group">
                <label>Society ID / House no.:</label>
                <input type="text" id="societyId">
            </div>
            <div class="form-group">
                <label>Society Name / House name:</label>
                <input type="text" id="societyName">
            </div>
            <div class="form-group">
                <label>Source:</label>
                <input type="text" id="source">
            </div>
            <div class="form-group">
                <label>Power Generated:</label>
                <input type="text" id="powerGenerated">
            </div>
            <div class="form-group">
                <label>Power Consumed:</label>
                <input type="text" id="powerConsumed">
            </div>
            <div class="form-group">
                <label>Difference:</label>
                <input type="text" id="difference">
            </div>
            <div class="form-group">
                <label>Carbon Footprint:</label>
                <input type="text" id="carbonFootprint">
            </div>
            <div class="form-group">
                <label>Total Bill (in â‚¹):</label>
                <input type="text" id="totalBill">
            </div>
            <button class="button" id="generateBillButton">Generate Bill</button>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script>
        const monthlyData = {
            January: {
                name: 'Amit Sharma',
                address: '123 Green Road, Mumbai',
                societyId: 'G123',
                societyName: 'Green Society',
                source: 'Solar Panels',
                powerGenerated: '500',
                powerConsumed: '300',
                difference: '200',
                carbonFootprint: '50',
                totalBill: '1500',
            },
            February: {
                name: 'Sita Rani',
                address: '456 Blue Lane, Delhi',
                societyId: 'B456',
                societyName: 'Blue Heights',
                source: 'Wind Turbines',
                powerGenerated: '600',
                powerConsumed: '350',
                difference: '250',
                carbonFootprint: '60',
                totalBill: '1800',
            },
            March: {
                name: 'Rajesh Gupta',
                address: '789 Yellow Avenue, Bangalore',
                societyId: 'Y789',
                societyName: 'Sunny Apartments',
                source: 'Hydro Energy',
                powerGenerated: '550',
                powerConsumed: '400',
                difference: '150',
                carbonFootprint: '55',
                totalBill: '1600',
            },
            April: {
                name: 'Pooja Mehta',
                address: '321 Red Street, Pune',
                societyId: 'R321',
                societyName: 'Red Villas',
                source: 'Solar Panels',
                powerGenerated: '700',
                powerConsumed: '500',
                difference: '200',
                carbonFootprint: '70',
                totalBill: '2000',
            },
            May: {
                name: 'Kumar Das',
                address: '654 White Boulevard, Kolkata',
                societyId: 'W654',
                societyName: 'White Towers',
                source: 'Wind Turbines',
                powerGenerated: '650',
                powerConsumed: '480',
                difference: '170',
                carbonFootprint: '65',
                totalBill: '1900',
            },
            June: {
                name: 'Anjali Singh',
                address: '987 Black Lane, Chennai',
                societyId: 'BL987',
                societyName: 'Black Enclave',
                source: 'Hydro Energy',
                powerGenerated: '580',
                powerConsumed: '390',
                difference: '190',
                carbonFootprint: '58',
                totalBill: '1700',
            },
            July: {
                name: 'Neha Patel',
                address: '159 Pink Avenue, Hyderabad',
                societyId: 'P159',
                societyName: 'Pink Flats',
                source: 'Solar Panels',
                powerGenerated: '720',
                powerConsumed: '530',
                difference: '190',
                carbonFootprint: '72',
                totalBill: '2050',
            },
            August: {
                name: 'Rahul Verma',
                address: '753 Green Valley, Ahmedabad',
                societyId: 'GV753',
                societyName: 'Green Acres',
                source: 'Wind Turbines',
                powerGenerated: '690',
                powerConsumed: '510',
                difference: '180',
                carbonFootprint: '69',
                totalBill: '2000',
            },
            September: {
                name: 'Seema Rao',
                address: '852 Grey Boulevard, Jaipur',
                societyId: 'GB852',
                societyName: 'Grey Apartments',
                source: 'Hydro Energy',
                powerGenerated: '740',
                powerConsumed: '550',
                difference: '190',
                carbonFootprint: '74',
                totalBill: '2100',
            },
            October: {
                name: 'Vijay Kumar',
                address: '963 Orange Street, Surat',
                societyId: 'OS963',
                societyName: 'Orange Heights',
                source: 'Solar Panels',
                powerGenerated: '600',
                powerConsumed: '470',
                difference: '130',
                carbonFootprint: '60',
                totalBill: '1750',
            },
            November: {
                name: 'Rina Joshi',
                address: '456 Brown Lane, Lucknow',
                societyId: 'BL456',
                societyName: 'Brown Society',
                source: 'Wind Turbines',
                powerGenerated: '650',
                powerConsumed: '520',
                difference: '130',
                carbonFootprint: '65',
                totalBill: '1800',
            },
            December: {
                name: 'Ravi Reddy',
                address: '741 Purple Road, Kanpur',
                societyId: 'PR741',
                societyName: 'Purple Enclave',
                source: 'Hydro Energy',
                powerGenerated: '700',
                powerConsumed: '590',
                difference: '110',
                carbonFootprint: '70',
                totalBill: '2000',
            },
        };

        document.getElementById('monthButton').addEventListener('click', function() {
            document.getElementById('monthDropdown').style.display = 
                document.getElementById('monthDropdown').style.display === 'block' ? 'none' : 'block';
        });

        const monthLinks = document.querySelectorAll('#monthDropdown a');
        monthLinks.forEach(link => {
            link.addEventListener('click', function(event) {
                event.preventDefault();
                const selectedMonth = this.getAttribute('data-month');
                const data = monthlyData[selectedMonth];
                
                document.getElementById('name').value = data.name;
                document.getElementById('address').value = data.address;
                document.getElementById('societyId').value = data.societyId;
                document.getElementById('societyName').value = data.societyName;
                document.getElementById('source').value = data.source;
                document.getElementById('powerGenerated').value = data.powerGenerated;
                document.getElementById('powerConsumed').value = data.powerConsumed;
                document.getElementById('difference').value = data.difference;
                document.getElementById('carbonFootprint').value = data.carbonFootprint;
                document.getElementById('totalBill').value = data.totalBill;

                document.getElementById('monthDropdown').style.display = 'none'; // Hide dropdown after selection
            });
        });

        document.getElementById('generateBillButton').addEventListener('click', function() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF('p', 'mm', 'a4');
            const pageWidth = doc.internal.pageSize.getWidth();
            const pageHeight = doc.internal.pageSize.getHeight();
            
            // Draw a border around the page
            doc.setLineWidth(2);
            doc.setDrawColor(0, 0, 0); 
            doc.rect(5, 5, pageWidth - 10, pageHeight - 10); 

            // Set title font style
            doc.setFont("Arial", "bold");
            doc.setFontSize(30);
            doc.text('ECOHUB', pageWidth / 2, 40, { align: 'center' });
            
            // Set subtitle font style
            doc.setFontSize(20);
            doc.text('Generated Bill', pageWidth / 2, 60, { align: 'center' });
            doc.setLineWidth(0.5);
            // doc.rect(40, 65, pageWidth - 80, 15); // Sub-title border

            // Bill details header
            doc.setFont("Arial", "normal");
            doc.setFontSize(14);
            doc.text('Bill Details:', 20, 80);
            doc.setLineWidth(0.5);
            doc.line(20, 82, pageWidth - 20, 82); // Horizontal line

            // Bill details formatted
            const details = `
                Name: ${document.getElementById('name').value}
                Address: ${document.getElementById('address').value}
                Society ID: ${document.getElementById('societyId').value}
                Society Name: ${document.getElementById('societyName').value}
                Source: ${document.getElementById('source').value}
                Power Generated: ${document.getElementById('powerGenerated').value} kWh
                Power Consumed: ${document.getElementById('powerConsumed').value} kWh
                Difference: ${document.getElementById('difference').value} kWh
                Carbon Footprint: ${document.getElementById('carbonFootprint').value} kg CO2
                Total Bill (in â‚¹): ${document.getElementById('totalBill').value}
            `;
            
            // Split details into lines for better formatting
            const detailLines = details.trim().split('\n');
            detailLines.forEach((line, index) => {
                doc.text(line, 20, 90 + (index * 10)); // Increment Y position for each line
            });

            // Save the PDF
            doc.save('generated_bill.pdf');
        });
    </script>
</body>
</html>
